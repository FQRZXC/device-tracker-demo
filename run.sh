#!/bin/bash

echo "=== Запуск Device Tracker Demo ==="
echo "ВНИМАНИЕ: Используйте только в образовательных целях!"
echo "-----------------------------------------------------"

# Проверяем, занят ли порт 8080
if lsof -Pi :8080 -sTCP:LISTEN -t >/dev/null ; then
    echo "Порт 8080 уже используется. Завершаем процесс..."
    sudo kill -9 $(lsof -t -i:8080)
    sleep 1
fi

# Запускаем PHP-сервер на порту 8080
echo "Запуск сервера на порту 8080..."
echo "Для доступа откройте в браузере: http://localhost:8080"
echo "Для остановки нажмите Ctrl+C"

# Запускаем сервер
php -S 0.0.0.0:8080 -t "$(pwd)/src"

# Если скрипт был прерван, выводим сообщение
echo "Сервер остановлен."
